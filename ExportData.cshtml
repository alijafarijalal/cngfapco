@model IEnumerable<cngfapco.Models.VehicleRegistration>

@{
    ViewBag.Title = "Index";
    Layout = null;
}

<html>
<head>
    <meta charset="utf-8">
    <script src="~/assets/bootstrap-datatable/jquery-3.3.1.js"></script>
    <link href="~/assets/bootstrap-datatable/css/datatables.min.css" rel="stylesheet" />
    <link href="~/assets/bootstrap-datatable/css/buttons.dataTables.min.css" rel="stylesheet" />
    <script src="~/assets/bootstrap-datatable/js/jquery.dataTables.min.js"></script>
    <script src="~/assets/bootstrap-datatable/js/dataTables.buttons.min.js"></script>
    <script src="~/assets/bootstrap-datatable/js/buttons.flash.min.js"></script>
    <script src="~/assets/bootstrap-datatable/js/jszip.min.js"></script>
    <script src="~/assets/bootstrap-datatable/js/buttons.html5.min.js"></script>
    <script src="~/assets/bootstrap-datatable/js/buttons.print.min.js"></script>
    <script src="~/assets/bootstrap-datatable/js/pdfmake.min.js"></script>
    <script src="~/assets/bootstrap-datatable/js/vfs_fonts.js"></script>
    <script src="~/assets/bootstrap-datatable/js/dataTables.bootstrap4.min.js"></script>
    <script src="~/assets/bootstrap-datatable/js/buttons.html5.min.js"></script>
    <link href="~/assets/bootstrap-datatable/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
    <link href="~/assets/bootstrap-datatable/css/buttons.dataTables.min.css" rel="stylesheet" />
    <link href="~/assets/bootstrap-datatable/css/bootstrap.css" rel="stylesheet" />

</head>
<body style="font-family:'B Yekan';font-size:12px;" dir="rtl">
    <div class="row-fluid" dir="rtl" style="font-family:Verdana, Geneva, Tahoma, sans-serif;">
        <div class="span12">
            <!-- BEGIN SAMPLE FORM widget-->
            <div class="widget">
                <div class="widget-title">
                    <h4 class="text-center"><i class="icon-reorder"></i>لیست خودروهای ثبت شده</h4>
                    <span class="tools">
                        <a href="javascript:;" class="icon-chevron-down"></a>
                        <a href="javascript:;" class="icon-remove"></a>
                    </span>
                </div>
                <div class="widget-body form">
                    <!-- BEGIN FORM-->
                    <div style="overflow:auto;">
                        @*<button id="btnExport">Export</button>*@
                        <div class="space15"></div>
                        <table class="table table-striped table-bordered table-hover table-advance" id="sample_editable_1" width="100%" style="font-size:11px;">
                            <thead>
                                <tr>
                                    <th>ردیف</th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.Workshop.Title)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.VehicleType.Type)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.TypeofUse.Type)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.OwnerName) و @Html.DisplayNameFor(model => model.OwnerFamily)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.PhoneNumber)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.MobileNumber)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.ConstructionYear)
                                    </th>
                                    <th>
                                        شماره پلاک
                                        @*@Html.DisplayNameFor(model => model.LeftNumberPlate)*@
                                    </th>
                                    @*<th>
                                            @Html.DisplayNameFor(model => model.AlphaPlate)
                                        </th>
                                        <th>
                                            @Html.DisplayNameFor(model => model.RightNumberPlate)
                                        </th>
                                        <th>
                                            @Html.DisplayNameFor(model => model.IranNumberPlate)
                                        </th>*@
                                    <th>
                                        @Html.DisplayNameFor(model => model.EngineNumber)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.ChassisNumber)
                                    </th>
                                    <th>
                                        @Html.DisplayNameFor(model => model.VIN)
                                    </th>
                                    <th>
                                        شماره بیمه نامه
                                    </th>

                                </tr>
                            </thead>

                            @{
                                int rowNum = 0;
                            }
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td>
                                            @(rowNum += 1)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.Workshop.Title)
                                        </td>
                                        <td>
                                            <a href="/VehicleRegistrations/Details?id=@item.ID ">
                                                @Html.DisplayFor(modelItem => item.VehicleType.Type)
                                            </a>
                                        </td>

                                        <td>
                                            @Html.DisplayFor(modelItem => item.TypeofUse.Type)
                                        </td>
                                        <td>
                                            @if (item.NationalCard != null)
                                            {
                                                if (Path.GetExtension(item.NationalCard) == ".jpg" || Path.GetExtension(item.NationalCard) == ".png")
                                                {
                                                    <a href="~/UploadedFiles/Vehicle/NationalCard/@item.NationalCard" target="_blank">
                                                        @*<img src="~/UploadedFiles/Vehicle/NationalCard/@item.NationalCard" class="thumbnailBusinessLicense" />*@
                                                        @Html.DisplayFor(modelItem => item.OwnerName) @Html.DisplayFor(modelItem => item.OwnerFamily)
                                                    </a>
                                                }
                                                else
                                                {
                                                    <a href="~/UploadedFiles/Vehicle/NationalCard/@item.NationalCard" target="_blank">
                                                        @Html.DisplayFor(modelItem => item.OwnerName) @Html.DisplayFor(modelItem => item.OwnerFamily)
                                                    </a>
                                                }

                                            }

                                        </td>

                                        <td>
                                            @Html.DisplayFor(modelItem => item.PhoneNumber)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.MobileNumber)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.ConstructionYear)
                                        </td>
                                        <td>
                                            @if (item.VehicleCard != null)
                                            {
                                                if (Path.GetExtension(item.VehicleCard) == ".jpg" || Path.GetExtension(item.VehicleCard) == ".png")
                                                {
                                                    <a href="~/UploadedFiles/Vehicle/VehicleCard/@item.VehicleCard" target="_blank">
                                                        @*<img src="~/UploadedFiles/Vehicle/VehicleCard/@item.VehicleCard" class="thumbnailBusinessLicense" />*@
                                                        ایران @Html.DisplayFor(modelItem => item.IranNumberPlate) | @Html.DisplayFor(modelItem => item.RightNumberPlate) @Html.DisplayFor(modelItem => item.AlphaPlate) @Html.DisplayFor(modelItem => item.LeftNumberPlate)

                                                    </a>
                                                }
                                                else
                                                {
                                                    <a href="~/UploadedFiles/Vehicle/VehicleCard/@item.VehicleCard" target="_blank">
                                                        ایران @Html.DisplayFor(modelItem => item.IranNumberPlate) | @Html.DisplayFor(modelItem => item.RightNumberPlate) @Html.DisplayFor(modelItem => item.AlphaPlate) @Html.DisplayFor(modelItem => item.LeftNumberPlate)

                                                    </a>
                                                }

                                            }

                                        </td>
                                        @*<td>
                                                @Html.DisplayFor(modelItem => item.AlphaPlate)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.RightNumberPlate)
                                            </td>
                                            <td>
                                                @Html.DisplayFor(modelItem => item.IranNumberPlate)
                                            </td>*@
                                        <td>
                                            @Html.DisplayFor(modelItem => item.EngineNumber)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.ChassisNumber)
                                        </td>
                                        <td>
                                            @Html.DisplayFor(modelItem => item.VIN)
                                        </td>
                                        <td>
                                            @if (cngfapco.Controllers.VehicleRegistrationsController.GetInsuranceCode(item.ID) == "+")
                                            {
                                                <a href="javascript:;" class="" data-toggle="modal" data-target="#modal-large" onclick="AddInsuranceCode(@item.ID)"><i class="icon-plus icon-white"></i> ثبت بیمه نامه </a>
                                            }
                                            else
                                            {
                                                <a href="/VehicleRegistrations/InsurancePreview?id=@item.ID ">
                                                    <span>@cngfapco.Controllers.VehicleRegistrationsController.GetInsuranceCode(item.ID)</span>
                                                </a>
                                            }
                                        </td>

                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>

                    <!-- END FORM-->
                </div>
            </div>
            <!-- END SAMPLE FORM widget-->
        </div>
    </div>
</body>
</html>


<script>
    $(document).ready(function () {
        $('#sample_editable_1').DataTable({
            dom: 'Bfrtip',
            buttons: [
            {
                extend: 'excel',
                text: 'Export excel',
                charset: 'utf-8',
                extension: '.xlsx',
                fieldSeparator: ';',
                fieldBoundary: '',
                filename: 'export excel',
                bom: true
            },
            {
                extend: 'csv',
                text: 'Export csv',
                charset: 'utf-8',
                extension: '.csv',
                fieldSeparator: ';',
                fieldBoundary: '',
                filename: 'export csv ',
                bom: true
            },
            {
                extend: 'pdf',
                text: 'Export pdf',
                charset: 'utf-8',
                extension: '.pdf',
                fieldSeparator: ';',
                fieldBoundary: '',
                filename: 'export pdf ',
                bom: true
            }
            ]
            //buttons: [
            //    {
            //        extend: 'excelHtml5',
            //        title: 'Data export excel'
            //    },
            //    {
            //        extend: 'pdfHtml5',
            //        title: 'Data export pdf'
            //    }
            //]
        });
    });</script>
